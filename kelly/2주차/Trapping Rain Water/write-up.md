## ðŸ‘€Â ì œí•œ ì‹œê°„ ì•ˆì— ì–´ë””ê¹Œì§€ í•´ëƒˆëŠ”ê°€?

`30`ë¶„ ì•ˆì— ë¬¸ì œë¥¼ í•´ê²°í•˜ì§€ ëª»í–ˆë‹¤. 22ë¶„ì¯¤ ë¬¸ì œë¥¼ ì–´ë–»ê²Œ í’€ì§€ ì•„ì´ë””ì–´ë¥¼ ë– ì˜¬ë¦¬ëŠ”ë° ì„±ê³µí•˜ê³  ì‹œê°„ 4ì´ˆë¥¼ ë‚¨ê¸°ê³  ì½”ë“œë¥¼ ìž‘ì„±í•´ ì œì¶œí–ˆì§€ë§Œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ í•˜ë‚˜ë¥¼ ë§Œì¡±í•˜ì§€ ëª»í•´ ì˜¤ë‹µ ì²˜ë¦¬ë¥¼ ë°›ì•˜ë‹¤. ë– ì˜¬ë¦° ì•„ì´ë””ì–´ ìžì²´ëŠ” ì˜¬ë°”ë¥¸ ë°©í–¥ì´ì—ˆì§€ë§Œ ë‚®ì€ ìª½ ë²½ì„ ì„ ì •í•˜ëŠ” ë¶€ë¶„ê³¼ ì¤‘ê°„ ë²½ì„ ìˆœíšŒí•˜ê¸° ìœ„í•´ ì‹œìž‘ì ì„ ì„ ì •í•˜ëŠ” ë¶€ë¶„ì— ê³ ë ¤í•˜ì§€ ëª»í•œ ë¶€ë¶„ì´ ë§Žì•„ì„œ 30ë¶„ì•ˆì— í’€ì§€ ëª»í–ˆì„ ê²ƒì´ë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ ìž‘ì„±í•œ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

```python
# 22ë¶„ì— ì•„ì´ë””ì–´ ë– ì˜¬ë¦¼
# 4ì´ˆ ë‚¨ê¸°ê³  ì½”ë“œ ìž‘ì„±ì€ í–ˆì§€ë§Œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 1ë²ˆ í‹€ë¦¼

from collections import deque

class Solution:
    def trap(self, height: List[int]) -> int:
        # ë©”ì¸ ë¡œì§
        answer = [0] * len(height)
        dq = deque([])
        for i in range(len(height)):
            if not dq or height[dq[-1]] >= height[i]:
                dq.append(i)
                continue
            
            last_pop = None
            while dq and height[dq[-1]] < height[i]:
                last_pop = dq.pop()
            for j in range(last_pop + 1, i):
                answer[j] = height[last_pop] - height[j]
        
        return sum(answer)
```

ì‹œê°„ì•ˆì— í’€ì§€ëŠ” ëª»í–ˆì§€ë§Œ ë¬¸ì œë¥¼ í•´ê²°í•  ì•„ì´ë””ì–´ì˜ ë°©í–¥ì€ ì˜³ì•˜ê¸° ë•Œë¬¸ì— ë¯¸ì²˜ ê³ ë ¤í•˜ì§€ ëª»í•œ ë¶€ë¶„ì„ ê³ ë¯¼í•˜ë©´ì„œ ì½”ë“œë¥¼ ê°œì„ í–ˆê³  ê²°êµ­ í˜¼ìžì„œ ì •ë‹µ ì½”ë“œë¥¼ ìž‘ì„±í•˜ëŠ”ë° ì„±ê³µí–ˆë‹¤.

```python
from collections import deque

class Solution:
    def trap(self, height: List[int]) -> int:
        # ë©”ì¸ ë¡œì§
        answer = [0] * len(height)
        dq = deque([])
        for i in range(len(height)):
            if not dq or height[dq[-1]] >= height[i]:
                dq.append(i)
                continue
            
            last_pop = None
            while dq and height[dq[-1]] < height[i]:
                last_pop = dq.pop()

            low_wall = last_pop if not dq else i
            start = last_pop if not dq else dq[-1]
            for j in range(start + 1, i):
                answer[j] = height[low_wall] - height[j]
            
            dq.append(i)
        
        return sum(answer)
```

- ìœ„ì—ì„œ ì–¸ê¸‰í•œ ê²ƒ ì²˜ëŸ¼ ë‚®ì€ ë²½ì„ ì„ ì •í•˜ëŠ” ì½”ë“œì™€, ë¶„ê¸° ì‹œìž‘ ìœ„ì¹˜ë¥¼ ì„ ì •í•˜ëŠ” ì½”ë“œì— ê³ ë ¤í•˜ì§€ ëª»í•œ ì—¬ëŸ¬ ë³€ìˆ˜ë“¤ì´ ìžˆì–´ ì‹œê°„ì•ˆì— í’€ì§€ ëª»í–ˆë‹¤.
- ìœ„ ì½”ë“œëŠ” ê·¸ëŸ¬í•œ ë¶€ë¶„ì„ ì¶”ê°€ ê³ ë ¤í•´ ìž‘ì„±í•œ ì½”ë“œì´ë©° ìµœì¢… ì •ë‹µ ì²˜ë¦¬ë¥¼ ë°›ì€ ì½”ë“œì´ë‹¤.

---

## ðŸ§‘â€ðŸ”¬Â ë¬¸ì œ ë¶„ì„

ì¼ë ¬ë¡œ ì„¸ì›Œì§„ ë²½ì˜ ë†’ì´ë“¤ì„ ë‹´ì€ ë¦¬ìŠ¤íŠ¸ê°€ ìž…ë ¥ë˜ë©´ ë¬¼ì´ ê³ ì¼ ìˆ˜ ìžˆëŠ” ìµœëŒ€ì–‘ì„ êµ¬í•´ ë°˜í™˜í•˜ëŠ” ë¬¸ì œì´ë‹¤.

ë¬¸ì œì— ì£¼ì–´ì§„ ì œì•½ ì¡°ê±´ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

**Constraints:**

- `n == height.length`
- `1 <= n <= 2 * 104`
- `0 <= height[i] <= 105`

---

## ðŸ¤”Â í’€ì´ ê³ ë¯¼

ìž…ë ¥ ë°°ì—´ì˜ ìµœëŒ€ í¬ê¸°ê°€ 10^4ì´ê¸° ë•Œë¬¸ì— O(N)ì˜ ì‹œê°„ ë³µìž¡ë„ ì•ˆìœ¼ë¡œ í’€ì–´ì•¼ í•˜ë¯€ë¡œ ì œì¼ ë¨¼ì € stackì´ë‚˜ queue ìžë£Œêµ¬ì¡°ë¥¼ ë– ì˜¬ë ¸ë‹¤. ë¬¸ì œì— ì£¼ì–´ì§„ ê·¸ë¦¼ ì˜ˆì‹œë¥¼ ì‚´íŽ´ë³´ë©´ì„œ ê³ ì¼ ìˆ˜ ìžˆëŠ” ë¬¼ì˜ì–‘ì„ ì–´ë–»ê²Œ êµ¬í•  ìˆ˜ ìžˆì„ê¹Œ ìƒê°í•´ë³´ë‹ˆ queueë³´ë‹¤ëŠ” stackì´ ë” ì í•©í•˜ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤.

ë¬¼ë¡  ì´ ë¬¸ì œëŠ” ë‹¨ìˆœížˆ stackì„ í™œìš©í•˜ëŠ”ê±¸ ë„˜ì–´ ì–´ëŠì •ë„ ì•„ì´ë””ì–´ë¥¼ ë– ì˜¬ë ¤ì•¼ í•˜ëŠ” ë¬¸ì œì´ë‹¤. ì´ë¯¸ ì´ì „ì— stack + ì•„ì´ë””ì–´ê°€ í•„ìš”í•œ ë¬¸ì œë¥¼ í’€ì–´ë´ì„œì¸ì§€ ì‹œê°„ì€ ì¢€ ê±¸ë ¸ì§€ë§Œ 22ë¶„ë§Œì— ë¬¸ì œë¥¼ í•´ê²°í•  ì•„ì´ë””ì–´ë¥¼ ë– ì˜¬ë¦¬ê¸´í–ˆë‹¤. ë‹¤ë§Œ ì•„ì´ë””ì–´ì˜ ë°©í–¥ì„± ìžì²´ëŠ” ë§žì•˜ì§€ë§Œ ê³ ë ¤í•˜ì§€ ëª»í•œ ë¶€ë¶„ì´ ë§Žì•„ 30ë¶„ë§Œì— ì •ë‹µ ì½”ë“œë¥¼ ìž‘ì„±í•  ìˆ˜ëŠ” ì—†ì—ˆë‹¤. ê·¸ëž˜ë„ ê³ ë ¤í•˜ì§€ ëª»í•œ ë¶€ë¶„ì„ ìƒê°í•˜ë©° ì½”ë“œë¥¼ ê°œì„ í•˜ë‹ˆ ë‹¤í–‰ì´ ì •ë‹µ ì²˜ë¦¬ë¥¼ ë°›ì„ ìˆ˜ ìžˆì—ˆë‹¤.

ì½”ë“œì— ë°˜ë³µë¬¸ì´ ë“¤ì–´ê°€ê¸°ëŠ” í•˜ì§€ë§Œ ë¦¬ìŠ¤íŠ¸ ì „ì²´ë¥¼ ë§¤ë²ˆ ë°˜ë³µí•˜ëŠ” ì½”ë“œê°€ ì•„ë‹ˆê³  ëŒ€ë¶€ë¶„ stackì˜ pop, push, peek ìž‘ì—…ì´ ëŒ€ë¶€ë¶„ì´ê¸° ë•Œë¬¸ì— Stack í™œìš©ìœ¼ë¡œ ì´ ë¬¸ì œë¥¼ ì¶©ë¶„ížˆ í’€ ìˆ˜ ìžˆì—ˆë‹¤.

### ê²°ë¡ 

- Stack í™œìš© + ì•„ì´ë””ì–´ ë°©ì‹ìœ¼ë¡œ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìžˆë‹¤.

---

## ðŸƒÂ ì½”ë“œ ìž‘ì„± ê³¼ì •

### í‹€ë¦° ë¶€ë¶„ ì •ì •

30ë¶„ì•ˆì— ìµœì¢… ìž‘ì„±í•œ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

```python
# 22ë¶„ì— ì•„ì´ë””ì–´ ë– ì˜¬ë¦¼
# 4ì´ˆ ë‚¨ê¸°ê³  ì½”ë“œ ìž‘ì„±ì€ í–ˆì§€ë§Œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 1ë²ˆ í‹€ë¦¼

from collections import deque

class Solution:
    def trap(self, height: List[int]) -> int:
        # ë©”ì¸ ë¡œì§
        answer = [0] * len(height)
        dq = deque([])
        for i in range(len(height)):
            if not dq or height[dq[-1]] >= height[i]:
                dq.append(i)
                continue
            
            last_pop = None
            while dq and height[dq[-1]] < height[i]:
                last_pop = dq.pop()
            for j in range(last_pop + 1, i):
                answer[j] = height[last_pop] - height[j]
        
        return sum(answer)
```

ì´ ì½”ë“œëŠ” ì˜¤ë‹µ ì²˜ë¦¬ë¥¼ ë°›ì•˜ëŠ”ë° ìž˜ëª»ëœ ë¶€ë¶„ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

- ê³ ì´ëŠ” ë¬¼ì˜ ë†’ì´ë¥¼ ê³„ì‚°í•˜ë ¤ë©´ ë‚®ì€ìª½ ë²½ì„ ê¸°ì¤€ìœ¼ë¡œ ì•ˆìª½ì„ ê²€ì‚¬í•´ì•¼í•˜ëŠ”ë° ì´ ë‚®ì€ìª½ ë²½ì„ ì„ ì •í•˜ëŠ” ê³¼ì •ì— ì˜¤ë¥˜ê°€ ìžˆì—ˆë‹¤. ë‹¨ìˆœ last_popìœ¼ë¡œ ì„ ì •í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼ í˜„ìž¬ stackì— ë‚¨ì•„ìžˆëŠ”ë²½ì´ ë†’ì€ì§€, ê²€ì‚¬ ëŒ€ìƒìœ¼ë¡œ ì„ ì •í•œ ë²½ì´ ë‚®ì€ì§€ë¥¼ ê³ ë ¤í•´ì•¼í–ˆë‹¤.
- ë‘ ë²½ ë‚´ë¶€ ê³ ì¸ë¬¼ì„ ê²€ì‚¬í•˜ëŠ” ë°˜ë³µë¬¸ì˜ ì‹œìž‘ ì§€ì ì„ ì„ ì •í•˜ëŠ” ë¡œì§ë„ ë”°ë¡œ ìž‘ì„±í•´ì•¼í•œë‹¤. ë‚®ì€ìª½ ë²½ì´ ì™¼ìª½ì¸ì§€ ì˜¤ë¥¸ìª½ì¸ì§€ì— ë”°ë¼ ì‹œìž‘ ì§€ì ì´ ë‹¬ë¼ì§€ê¸° ë•Œë¬¸ì´ë‹¤.

ìœ„ í‹€ë¦° ë¶€ë¶„ì„ ì •ì •í•´ ì •ë‹µ ì²˜ë¦¬ë¥¼ ë°›ì€ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

```python
from collections import deque

class Solution:
    def trap(self, height: List[int]) -> int:
        # ë©”ì¸ ë¡œì§
        answer = [0] * len(height)
        dq = deque([])
        for i in range(len(height)):
            if not dq or height[dq[-1]] >= height[i]:
                dq.append(i)
                continue
            
            last_pop = None
            while dq and height[dq[-1]] < height[i]:
                last_pop = dq.pop()

            low_wall = last_pop if not dq else i
            start = last_pop if not dq else dq[-1]
            for j in range(start + 1, i):
                answer[j] = height[low_wall] - height[j]
            
            dq.append(i)
        
        return sum(answer)
```

### ìµœì¢… ì •ë‹µ ì½”ë“œ ê°œì„ 

GPTì—ê²Œ ë¶€íƒí•´ì„œ í’€ì´ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ê°œì„ í–ˆë‹¤.

```python
from collections import deque

class Solution:
    def trap(self, height: List[int]) -> int:
        stack = []
        total = 0

        for i in range(len(height)):
            while stack and height[stack[-1]] < height[i]:
                bottom = stack.pop()

                if not stack:
                    break

                left = stack[-1]
                width = i - left - 1
                water_height = min(height[left], height[i]) - height[bottom]
                total += width * water_height

            stack.append(i)

        return total
```

- ì´ ì½”ë“œì˜ ì•„ì´ë””ì–´ëŠ” ê³¨ì§œê¸°ë¥¼ ì°¾ì„ ë•Œ ë§ˆë‹¤ ê³„ì‚°í•˜ëŠ” ë°©ì‹ì¸ë° ì²˜ìŒì—ëŠ” ì½”ë“œë§Œ ë³´ê³  ì´í•´ê°€ ìž˜ ì•ˆê°ˆ ìˆ˜ ìžˆë‹¤. í’€ì´ë¥¼ ë³´ë©° ë¬¸ì œì— ëŒ€ìž…í•´ë³´ë©´ ê¸ˆë°© ì´í•´ê°€ ëœë‹¤.
- ì´ í’€ì´ë¥¼ ì‚¬ìš©í•˜ë©´ ê¸°ì¡´ì— ìž‘ì„±í•œ ì½”ë“œë³´ë‹¤ í›¨ì”¬ ë¹ ë¥´ë‹¤.

---

## ðŸ¥°Â ë°°ìš´ì  & ëŠë‚€ì 

- ì•„ì´ë””ì–´ëŠ” ë– ì˜¬ë ¸ì§€ë§Œ ê³ ë ¤í•˜ì§€ ëª»í•œ ë¶€ë¶„ë„ ìžˆì—ˆê³  ì†ì´ ë” ë¹¨ëžìœ¼ë©´ ì•„ë§ˆ í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ëŠ” í†µê³¼í•˜ëŠ” ì½”ë“œë¥¼ ìž‘ì„±í–ˆì„ê²ƒì´ë‹¤. ì½”ë“œë¥¼ ë” ë¹¨ë¦¬ êµ¬í˜„í•˜ëŠ” ì—°ìŠµì„ ìš°ì„  í•´ì•¼ê² ë‹¤.